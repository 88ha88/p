<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>테SQL Injection Login Simulation</title>
<style>
  body { font-family: sans-serif; padding: 40px; background: #f5f5f5; }
  input, button { padding: 8px; margin: 6px; width: 300px; }
  .output { margin-top: 20px; white-space: pre-line; background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 0 5px #ccc; }
</style>
</head>
<body>
<h2>🔐 로그인 페이지 (SQL Injection 시뮬레이터)</h2>
<form onsubmit="simulateLogin(); return false;">
  <input type="text" id="username" placeholder="Username" /><br />
  <input type="password" id="password" placeholder="Password" /><br />
  <button type="submit">Login</button>
</form>
<div class="output" id="result"></div>
<script>
let extractedUsers = null;

function simulateLogin() {
  let user = document.getElementById("username").value.toLowerCase().trim();
  let pass = document.getElementById("password").value.toLowerCase().trim();
  const result = document.getElementById("result");

  if (user.includes("select username, password from users")) {
    extractedUsers = {
      "admin": "admin123",
      "user": "test1234",
      "ntests": "ilovesqlinjection"
    };
    result.textContent = "admin | admin123\nuser | test1234\nntests | ilovesqlinjection";
    return;
  }

  if (extractedUsers && user in extractedUsers && pass === extractedUsers[user]) {
    result.textContent = `🎯 ${user} 계정 로그인 성공!`;
    return;
  }

  if (user === "ntests" && pass === "ilovesqlinjection") {
    result.textContent = "🎯 최종 계정 로그인 성공!";
    return;
  }

  if (user.includes("' union select null, table_name from information_schema.tables")) {
    result.textContent = "users\nlogs";
    return;
  }

  if (user.includes("from information_schema.columns") && user.includes("users")) {
    result.textContent = "id\nusername\npassword";
    return;
  }

  if (user.includes("select") && user.includes("@@version")) {
    result.textContent = "MySQL 5.7.31";
    return;
  }

  if (user.includes("order by")) {
    result.textContent = "ORDER BY 성공 (컬럼 개수 2)";
    return;
  }

  if (user.includes("'")) {
    result.textContent = "You have an error in your SQL syntax";
    return;
  }

  result.textContent = "❌ 로그인 실패.";
}
</script>
</body>
</html>
